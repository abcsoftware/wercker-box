name: abcsoftware-box
description: Custom wercker box for abcsoftware
version: 0.0.1
platform: ubuntu@12.04
type: main
script: |
    sudo apt-get update
    sudo apt-get install -y wget curl git-core build-essential
    sudo apt-get install -y xvfb firefox

    # install node
    NODE_VER=v0.10.29
    wget http://nodejs.org/dist/v0.10.29/node-$(NODE_VER)-linux-x64.tar.gz
    tar -xzf node-$(NODE_VER)-linux-x64.tar.gx

    pushd node-$(NODE_VER)-linux-x64
    mv bin/node /usr/local/bin/node
    mv lib/node_modules /usr/local/lib/node_modules
    ln -s /usr/local/lib/node_modules/npm/bin/npm /usr/local/bin/npm
    popd

    # show node version
    node -v

    # update npm
    npm install -g npm
    npm -v

    # add commonly used packages to cache
    bash ./cache-deps.sh
